<app-loader *ngIf="loading"></app-loader>
<div fxLayout="row" fxLayoutAlign="space-around center">
  <div fxLayout="row" fxLayoutAlign="center center" class="register-form">

    <form role="form" [formGroup]="formRegister" (ngSubmit)="onSubmit()">

      <mat-card class="mat-elevation-z8" flex="80">

        <mat-card-title>Sign up</mat-card-title>

        <mat-card-content fxLayout="column" fxLayoutAlign="space-around stretch">

          <div fxLayout="row" fxLayoutAlign="space-between stretch">
            <mat-form-field fxFlex="45">
              <input matInput type="text" formControlName="firstname" autocomplete="firstname" placeholder="First Name">
              <mat-error *ngIf="p.firstname.touched && p.firstname.hasError('required')">
                <small>Required field</small>
              </mat-error>
            </mat-form-field>

            <mat-form-field fxFlex="45">
              <input matInput type="text" formControlName="lastname" autocomplete="lastname" placeholder="Last Name">
              <mat-error *ngIf="p.lastname.touched && p.lastname.hasError('required')">
                <small>Required field</small>
              </mat-error>
            </mat-form-field>
          </div>

          <mat-form-field>
            <input matInput type="text" formControlName="address" autocomplete="address" placeholder="Address">
            <mat-error *ngIf="p.address.touched && p.address.hasError('required')">
              <small>Required field</small>
            </mat-error>
          </mat-form-field>

          <div fxLayout="row" fxLayoutAlign="space-between stretch">
            <mat-form-field fxFlex="75">
              <input matInput type="text" formControlName="city" autocomplete="city" placeholder="City">
              <mat-error *ngIf="p.city.touched && p.city.hasError('required')">
                <small>Required field</small>
              </mat-error>
            </mat-form-field>

            <mat-form-field fxFlex="15">
              <mat-select matNativeControl placeholder="State" formControlName="state">
                <mat-option *ngFor="let state of states" [value]="state">
                  {{state}}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="p.state.touched && p.state.hasError('required')">
                <small>Required field</small>
              </mat-error>
            </mat-form-field>

          </div>

          <div fxLayout="row" fxLayoutAlign="space-between stretch">
            <mat-form-field fxFlex="45">
              <input matInput type="text" formControlName="phone" autocomplete="Phone" placeholder="Phone">
            </mat-form-field>
            <mat-form-field fxFlex="45">
              <input matInput type="text" formControlName="mobilephone" autocomplete="mobilephone"
                placeholder="Mobile Phone">
                <mat-error *ngIf="p.mobilephone.touched && p.mobilephone.hasError('required')">
                  <small>Required field</small>
                </mat-error>
            </mat-form-field>
          </div>

          <div fxLayout="row" fxLayoutAlign="space-between stretch">
            <mat-form-field fxFlex="100">
              <input matInput type="email" formControlName="email" class="form-control" value="" autocomplete="email"
                placeholder="E-mail">
                <mat-error *ngIf="p.email.touched && p.email.hasError('required')">
                  <small>Required field</small>
                </mat-error>
            </mat-form-field>
          </div>

          <div fxLayout="row" fxLayoutAlign="space-between stretch">

            <mat-form-field fxFlex="45">
              <input matInput type="password" formControlName="password1" type="password" autocomplete="off">
              <mat-placeholder>
                <mat-icon>lock</mat-icon> New password
              </mat-placeholder>
              <mat-error *ngIf="p.password1.touched && p.password1.hasError('required')">
                <small>Required field</small>
              </mat-error>
            </mat-form-field>

            <mat-form-field fxFlex="45">
              <input matInput type="password" formControlName="password2" class="form-control" autocomplete="off">
              <mat-placeholder>
                <mat-icon>lock_outline</mat-icon> Password confirmation
              </mat-placeholder>

            </mat-form-field>
          </div>
          <!-- ERRO PASSWORD-->
          <mat-error *ngIf="formRegister.invalid && p.password2.value && !p.password2.hasError('minlength')">
            <small>Passwords don's match</small>
          </mat-error>

          <div fxLayout="row" fxLayoutAlign="end end">
            <button mat-button color="primary" type="submit" [disabled]="!formRegister.valid">
              <mat-icon>done</mat-icon>&nbsp;Register
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </form>
  </div>
</div>
